<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin - Tables</title>
    <link rel="stylesheet" href="/static/style.css" />
    <style>
      body{font-family: system-ui, Arial, sans-serif; margin:0}
      header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f97316;color:#fff}
      nav a{margin-right:12px;color:#fff;text-decoration:none}
      .container{padding:16px}
      table{width:100%;border-collapse:collapse}
      th,td{border:1px solid #ddd;padding:8px}
      th{background:#fafafa;text-align:left}
      input,select,textarea{padding:6px 8px}
      .btn{padding:6px 10px;border:1px solid #ccc;background:#fff;cursor:pointer}
      .btn-primary{background:#f97316;color:#fff;border-color:#f97316}
      .badge{display:inline-block;padding:2px 6px;border-radius:10px;background:#eee}
    </style>
  </head>
  <body>
    <header>
      <div><strong>AROMA Admin</strong></div>
      <nav>
        <a href="/admin">Dashboard</a>
        <a href="/admin/items">Items</a>
        <a href="/admin/tables">Tables</a>
        <a href="/admin/orders">Orders</a>
        <a href="/admin/settings">Settings</a>
      </nav>
    </header>
    <div class="container">
      <h2>Tables</h2>
<form method="post" action="/admin/tables/create" style="margin-bottom:12px">
  <input name="number" placeholder="Table Number" required />
  <button class="btn btn-primary" type="submit">Add Table</button>
  <p style="color:#666">Each table has a unique token embedded in the QR.</p>
  <p style="color:#666">Set TABLE_URL_BASE in .env to your deployed frontend URL (e.g. https://yourdomain.com).</p>
  <p style="color:#666">Frontend should read URL params table= and token= and include them in POST /api/orders.</p>
</form>

<div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:12px">
  <% tables.forEach(t => { %>
    <div style="border:1px solid #eee; padding:12px">
      <div style="display:flex; justify-content:space-between; align-items:center">
        <strong>Table <%= t.number %></strong>
      </div>
      <div>
        <img src="<%= t.qr %>" alt="QR" style="width:200px; height:200px; object-fit:contain" />
        <div style="word-break:break-all"><a href="<%= t.url %>"><%= t.url %></a></div>
        <div>Token: <code><%= t.token %></code></div>
      </div>
    </div>
  <% }) %>
  </div>
    </div>
  </body>
</html>
